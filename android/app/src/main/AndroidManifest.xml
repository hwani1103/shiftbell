<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">
    
    <!-- 알람 권한 -->
    <uses-permission android:name="android.permission.SCHEDULE_EXACT_ALARM"/>
    <uses-permission android:name="android.permission.USE_EXACT_ALARM"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    
    <!-- 알림 권한 -->
    <uses-permission android:name="android.permission.POST_NOTIFICATIONS"/>
    <uses-permission android:name="android.permission.USE_FULL_SCREEN_INTENT"/>
    
    <!-- 진동 권한 -->
    <uses-permission android:name="android.permission.VIBRATE"/>
    
    <!-- 잠금 화면 해제 권한 -->
    <uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>
    
    <!-- Overlay 권한 ⭐ -->
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>
    
    <!-- 포그라운드 서비스 (선택) -->
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE"/>
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_SPECIAL_USE"/>

    <application
        android:label="교대시계"
        android:name="${applicationName}"
        android:icon="@mipmap/ic_launcher"
        tools:replace="android:label">
        
        <!-- 메인 Activity - ⭐ 두 줄 삭제 -->
<activity
    android:name=".MainActivity"
    android:exported="true"
    android:launchMode="singleTask"
    android:taskAffinity="com.example.shiftbell.main"
    android:theme="@style/LaunchTheme"
    android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"
    android:hardwareAccelerated="true"
    android:windowSoftInputMode="adjustResize">
    <!-- ⭐ showWhenLocked, turnScreenOn 삭제됨 -->
    
    <meta-data
      android:name="io.flutter.embedding.android.NormalTheme"
      android:resource="@style/NormalTheme"
      />
    
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity>

        <!-- 전체 화면 알람 Activity -->
        <activity
            android:name=".AlarmActivity"
            android:exported="false"
            android:launchMode="singleTask"
            android:taskAffinity="com.example.shiftbell.alarm"
            android:excludeFromRecents="true"
            android:theme="@style/Theme.AppCompat.NoActionBar"
            android:showWhenLocked="true"
            android:turnScreenOn="true"
            android:screenOrientation="portrait"
            android:noHistory="true"
            android:finishOnTaskLaunch="true"/>
        
        <!-- Overlay 알람 Service ⭐ -->
        <service
            android:name=".AlarmOverlayService"
            android:enabled="true"
            android:exported="false"/>

        <meta-data
            android:name="flutterEmbedding"
            android:value="2" />

        <!-- 커스텀 알람 리시버 -->
        <receiver 
            android:name=".CustomAlarmReceiver"
            android:enabled="true"
            android:exported="false"/>
        

    </application>

    <!-- 배터리 최적화 제외 요청 쿼리 -->
    <queries>
        <intent>
            <action android:name="android.settings.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS"/>
        </intent>
    </queries>
</manifest>